Up next, you will perform the installation of the SPIRE Agent. 

You will start by inspecting the agent configuration file:
` cat agent.conf`{{execute}}

Next, you will set the trust domain to match the same trust domain as configured in the corrresponding SPIRE Server configuration. 

Set `trust_domain` to [[HOST_SUBDOMAIN]]-80-[[KATACODA_HOST]].environments.katacoda.com in agent.conf
`sed -i 's/<TRUST_DOMAIN>/[[HOST_SUBDOMAIN]]-80-[[KATACODA_HOST]].environments.katacoda.com/g' agent.conf`{{execute}}

There are several attestation methods by which an agent will be attested to join a trust domain. For the purpose of this exercise, we will use join token node attestation.  The join_token plugin attests a node based on a pre-shared, one-time-use join token. A token must be generated by the server before it can be used to attest a node.

Conveniently, tokens may be generated through the CLI utility (spire-server token generate). You can generate a Join Token by running the command below on the SPIRE Server: 
`/opt/spire-0.9.1/bin/spire-server token generate -spiffeID spiffe://[[HOST_SUBDOMAIN]]-80-[[KATACODA_HOST]].environments.katacoda.com/clientnode`{{execute}}

Now that a token has been generated, proceed to start the SPIRE Agent using the generated join token:

Run the command below on the terminal replacing the <JOIN_TOKEN> placeholder with the token generated earlier
`/opt/spire-0.9.1/bin/spire-agent run -config agent.conf -joinToken <JOIN_TOKEN> &`{{copy}}

Notes: 
The join_token is responsible for attesting the agent's identity using a one-time-use pre-shared key.
The join token itself is configured by a CLI flag (-joinToken).
